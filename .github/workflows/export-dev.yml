name: Export Power Platform Solution from Dev

on:
  workflow_dispatch:

jobs:
  export-solution:
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v3

    - name: Install Power Platform CLI
      uses: microsoft/powerplatform-actions/actions-install@v1

    - name: Export solution from Dev
      uses: microsoft/powerplatform-actions/export-solution@main
      with:
        environment-url: ${{ secrets.DEV_ENV_URL }}
        app-id: ${{ secrets.CLIENT_ID }}
        password-secret: ${{ secrets.CLIENT_SECRET }}
        tenant-id: ${{ secrets.TENANT_ID }}
        solution-name: D365LightQuotingSystem
        solution-output-file: solution.zip
        auth-type: 'spn'

